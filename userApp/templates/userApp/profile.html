{% extends "ds_app/base.html" %}
{% block title %}Profile{% endblock %}
{% block content %}
<style>
    body {
    font-family: sans-serif;
    background-color: rgb(245, 245, 245);
    margin: 0;
    padding: 0;
    color: rgb(25, 67, 67);
}

.containerprofile {
    max-width: 80%;
    margin: 50px auto;
    padding: 50px;
    background-color: white;
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.159);
    border-radius: 5px;
}

/* Profile Picture */
.profile-pic {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 10px;
}

.profile-pic img {
    width: 150px;
    height: 150px;
    border-radius: 50%;
    border: 2px solid #ccc;
    object-fit: cover;
    margin-bottom: 20px;
}

.profile-pic button {
    padding: 5px 10px;
    background: #262626;
    color: white;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    margin-bottom: 20px;
}

.profile-pic button:hover {
    background: #2f2f2f;
}

/* Bio Section */
.bio-section {
    flex: 1;
}

.bio-section label {
    font-weight: bold;
    display: block;
    margin-bottom: 5px;
}

.bio-section textarea {
    width: 100%;
    height: 80px;
    resize: none;
    padding: 5px;
    border: 1px solid #ccc;
    border-radius: 5px;
    margin-bottom: 20px;
}

#save-btn {
    padding: 2px 8px;
    background: #f6f6f6;
    color: rgb(24, 24, 24);
    border: 1px solid rgb(27, 27, 27);
    border-radius: 5px;
    cursor: pointer;
    margin-bottom: 50px;
}

/* Quizzes & Leaderboard Section */

.quiz-lb-section {
    display: flex;
    flex-direction: row;
    justify-content: space-between;
    gap: 50px;
}

.quizzes-section,
.leaderboard-section {
    margin-top: 20px;
}

#quizzes-btn {
    padding: 8px 15px;
    background: #262626;
    color: white;
    border: none;
    border-radius: 5px;
    cursor: pointer;
}

#quizzes-btn:hover {
    background: #2f2f2f;
}

#leaderboard-btn {
    padding: 8px 15px;
    background: #262626;
    color: white;
    border: none;
    border-radius: 5px;
    cursor: default;
}
</style>

    <div class="containerprofile">
        <!-- Profile Picture Placeholder -->
        <div class="profile-pic">
            <img id="profile-icon">
            <input type="file" id="file-input" accept="image/*" style="display: none;">
            <button id="upload-btn">Upload</button>
        </div>

        <!-- Bio Textbox -->
        <div class="bio-section">
            <label for="bio">Bio</label>
            <textarea id="bio" maxlength="300" placeholder="Write your bio here..."></textarea>
            <button id="save-btn">Save Profile</button>
        </div>

        <div class="quiz-lb-section">

        <!-- Quizzes Completed Button -->
        <div class="quizzes-section">
            <a href="{% url 'quizApp:quiz-home' %}">
                <button id="quizzes-btn">Quizzes Completed: </button>
            </a>
        </div>

        <!-- Leaderboard Placement -->
        <div class="leaderboard-section">
            <button id="leaderboard-btn">Leaderboard Rank: </button>
        </div>
        </div>
    </div>

    <script>
        // Save the profile picture locally
    document.getElementById("upload-btn").addEventListener("click", function() {
        document.getElementById("file-input").click();
    });

    document.getElementById("file-input").addEventListener("change", function(event) {
        const file = event.target.files[0];
        if (file) {
            const reader = new FileReader();
            reader.onload = function(e) {
                document.getElementById("profile-icon").src = e.target.result;
                localStorage.setItem("profileImage", e.target.result); // Save to Local Storage
            };
            reader.readAsDataURL(file);
        }
    });

    // Save the bio
    document.getElementById("save-btn").addEventListener("click", function() {
        const bioText = document.getElementById("bio").value;
        localStorage.setItem("bioText", bioText);
        alert("Profile saved!");
    });

    // On reload, they are still there
    window.onload = function() {
        const savedImage = localStorage.getItem("profileImage");
        const savedBio = localStorage.getItem("bioText");
        if (savedImage) {
            document.getElementById("profile-icon").src = savedImage;
        }
        if (savedBio) {
            document.getElementById("bio").value = savedBio;
        }
    };
    </script>    

{% endblock %}